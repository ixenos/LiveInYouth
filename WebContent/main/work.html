<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>LiveInYouth - 聆青</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by FreeHTML5.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<!-- 浏览器标签图标 facicon.ico -->
	<link rel="icon" href="/LiveInYouth/favicon.ico" type="image/x-icon" />  
	<!-- //浏览器标签图标 facicon.ico -->
  	<!-- Facebook and Twitter integration -->
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />
	<!-- google fonts -->
	<link href='fonts/googleapis-fonts/fonts.css?family=Work+Sans:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->



	</head>
	
	
	<!-- 发现歌单模块 -->
	<body>
		
	<div class="fh5co-loader"></div>
	
	<div id="page">
	<nav class="fh5co-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-xs-2">
					<div id="fh5co-logo"><a href="main.html">LiveInYouth.</a></div>
				</div>
				<div class="col-xs-10 text-right menu-1">
					<!-- 无序列表 -->
					<ul>
						<!-- active类所在的列表元素会加亮强调 -->
						<li><a href="main.html">发现音乐</a></li>
						<li class="active"><a href="work.html">发现歌单</a></li>
						<!-- 砍掉发现故事
						<li><a href="story.html">发现故事</a></li>
						 -->
						<li><a href="fm.html">私人电台</a></li>
						<li>
						<!-- <li class="has-dropdown active"> -->
							<a href="services.html">我的聆青</a>
							<!-- 暂时砍掉
							<ul class="dropdown">
								<li><a href="#">个人主页</a></li>
								<li><a href="#">我的歌单</a></li>
								<li><a href="#">我的故事</a></li>
								<li><a href="#">退出登录</a></li>
							</ul>
							 -->
						</li>
						<li><a href="about.html">关于聆青</a></li>
					</ul>
				</div>
			</div>
		</div>
	</nav>
	<!-- 头面背景 -->
	<header id="fh5co-header" class="fh5co-cover fh5co-cover-sm" role="banner" style="background-image:url(images/img_bg_2.jpg);">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeIn">
							<h1>发现歌单</h1>
							<h2>Discover <a href="work.html" target="_blank">SongList</a></h2>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	
	<!-- songlist九宫格歌单模块 -->
	<div id="fh5co-portfolio">
		<div class="container">
			<div class="row animate-box">
				<div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
					<h2>LiveInYouth</h2>
					<p>在此发现聆青</p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<!-- 
					<div class="work-grid" style="background-image: url(/LiveInYouth/images/discoverSongList/songList/songList-1.jpg);">
					 -->
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-4 text-center animate-box">
					<div class="work-grid" style="">
						<div class="desc">
							<h3><a href="#"><!-- Work Title Here --></a></h3>
							<span class="cat"><!-- Web Design --></span>
							<p>
								<span class="download"><a href="#"><i class="icon-play"></i></a></span>
								<span class="love"><a href="#"><i class="icon-heart"></i></a></span>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- //九宫格歌单模块 -->

	<!-- subscribe订阅模块 -->
	<div id="fh5co-started">
		<div class="container">
			<div class="row animate-box">
				<div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
					<h2>订阅我们</h2>
					<p>欢迎订阅聆青 获取专属于你的感官世界</p>
				</div>
			</div>
			<div class="row animate-box">
				<!-- 已登录时 -->
				<div id="loginSubs" class="col-md-8 col-md-offset-4 hidden">
					<form class="form-inline">
						<!-- 
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label for="email" class="sr-only">Email</label>
								<input type="email" class="form-control" id="email" placeholder="Email">
							</div>
						</div> 
						-->
						<div class="col-md-6 col-sm-6">
							<button id="subs" type="button" class="btn btn-default btn-block">订阅</button>
						</div>
					</form>
				</div>
				<!-- //已登录时 -->
				<!-- 已登录并订阅 -->
				<div id="hasSubs" class="col-md-8 col-md-offset-4 hidden">
					<form class="form-inline">
						<!-- 
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label for="email" class="sr-only">Email</label>
								<input type="email" class="form-control" id="email" placeholder="Email">
							</div>
						</div> 
						-->
						<div class="col-md-6 col-sm-6">
							<!-- 已订阅，disabled使其默认不可点击 -->
							<button disabled="disabled" type="button" class="btn btn-default btn-block">已订阅</button>
						</div>
					</form>
				</div>
				<!-- //已登录并订阅 -->
				<!-- 未登录时 -->
				<div id="notLoginSubs" class="col-md-8 col-md-offset-4">
					<form class="form-inline">
						<!-- 
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label for="email" class="sr-only">Email</label>
								<input type="email" class="form-control" id="email" placeholder="Email">
							</div>
						</div>
						-->
						<div class="col-md-6 col-sm-6">
							<button id="registSubs" type="button" class="btn btn-default btn-block">点击登录</button>
						</div>
					</form>
				</div>
				<!-- //未登录时 -->
			</div>
		</div>
	</div>
	<!-- //subscribe订阅模块 -->

	<!-- 底部 -->
	<footer id="fh5co-footer" role="contentinfo">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-4 fh5co-widget">
					<h3>LiveInYouth - 聆青</h3>
					<p>历经青年互动科技有限公司是一个新型的互联网公司，它通过一个泛社区化的感觉分享网站——聆青网，专注于向15-30岁的青年以及30-50岁的泛青年群体提供一个感觉分享的互联网平台。</p>
					<p><a href="/LiveInYouth/main/about.html">关于 聆青</a></p>
				</div>
				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<ul class="fh5co-footer-links">
						<li><a href="http://www.w3school.com.cn">W3School</a></li>
						<li><a href="http://www.runoob.com/">Runoob</a></li>
						<li><a href="http://www.iteye.com/">ITeye</a></li>
						<li><a href="http://www.jb51.net/">Jb51</a></li>
						<li><a href="http://freehtml5.co">FreeHtml5</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<ul class="fh5co-footer-links">
						<li><a href="https://leetcode.com/">LeetCode</a></li>
						<li><a href="http://stackoverflow.com/">StackOverFlow</a></li>
						<li><a href="https://www.v2ex.com/">v2ex</a></li>
						<li><a href="https://git.oschina.net/">OsChina</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<ul class="fh5co-footer-links">
						<li><a href="http://weibo.com/ixenos">Weibo</a></li>
						<li><a href="http://www.cnblogs.com/ixenos/">Cnblogs</a></li>
						<li><a href="https://www.zhihu.com/people/ixenos/">Zhihu</a></li>
						<li><a href="https://github.com/ixenos">GitHub</a></li>
					</ul>
				</div>
			</div>

			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<small class="block">&copy; 2017 LiveInYouth. All Rights Reserved.</small><br />
						<a href="http://github.com/ixenos/" target="_blank">历经青年公司</a> 版权所有 
					</p>
				</div>
			</div>

		</div>
	</footer>
	<!-- //底部 -->
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- countTo -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>
	
	<!-- 订阅模块js -->
	<script src="/LiveInYouth/util/js/cookie/js.cookie-2.1.4.min.js"></script>
	<script src="js/lvy.subscribe.js"></script>
	<!-- //订阅模块js -->
	
	<!-- 九宫格歌单模块js -->
	<script type="text/javascript">
	$(function(){
		var url = "/LiveInYouth/DiscoverSongList";
		$.ajax({
			cache : false , //开启缓存，下个ajax会从缓存中读数据，除非url重写（cache:false就是给url加上时间戳来不缓存请求的）
			type : "GET", //具有幂等性的GET才能使用cache，POST不符合幂等性，所以cache没有意义
			url : url,
			data : "type=getList", //指定服务类型
			async : true,
			success : function(data) {
				if(data.updated == "true"){
					//循环遍历填充歌单图片、歌单名、歌单介绍
					$("div[class='work-grid']").each(function(i){
						/*
							循环填充歌单封面、歌单名、歌单介绍
						*/
						$(this).attr("style", "background-image: url("+ data.hitLists[i].songListImgSrc +")");
						$(this).children(".desc").children("h3").children("a").text(data.hitLists[i].listName);
						$(this).children(".desc").children("span:first").text(data.hitLists[i].listIntro);
						
						var btnSet = $(this).children("div").children("p");
						/*
							播放歌单模块（绿色按钮）
							
							将歌单ID交给私人电台模块，由其进行播放
						*/
						var playerUrl = "/LiveInYouth/main/fm.html?songListId="
						btnSet.children(".download").children("a").attr("href", playerUrl + data.hitLists[i].songListId);
						/*
							收藏模块（红色按钮）
						*/
						var collectUrl = "/LiveInYouth/Collect?type=listColl&songListId=";
						//为收藏链接赋值，然后下面使用另外的事件绑定，取消get的默认跳转
						btnSet.children(".love").children("a").attr("href", collectUrl + data.hitLists[i].songListId);
						/*
							（转移收藏独立处理js到此处/或者将该js封装成函数）
							收藏按钮事件绑定						
						*/
					});
					
					love();//收藏独立处理js
					
				}
			}
		});
	});
	</script>
	<!-- //九宫格歌单模块js -->
	
	<!-- 收藏独立处理js（bug未修复版）
	<script type="text/javascript">
	$(function(){
		/*
			改装点赞独立处理JS	
		
			取消get的默认跳转，且简要地禁止重复点击（bug:刷新重新计算）
		*/
		$("span[class='love']").each(function(i){
			var anchor = $(this).children("a");//取锚点
			var href = anchor.attr("href");//填充评论的赞地址
			
			//TODO 这里出问题
			/*
				因为同样都是在文档结束时进行的操作，何况这里也不是事件绑定，而是一开始就操作了！
				如果在上面的ajax回调赋值href之前获取，那么这个href就是废的，获取到#而已！而这个href却被赋给了事件ajax中的href，
				那么如果不禁用默认事件，那么点击按钮时，会触发两个事件：
					1、href为#的ajax事件
					2、href为上一个ajax赋值的click事件（普通get请求），由于使用了伪锚点，所以不进行跳转
				禁用默认事件后，就只剩1了
				
				之所以能够在后台看到数据，是因为我没有禁用默认事件，那其实是默认click事件，
				因此我的ajax就是没有作用的，因为href都没有，所以就么有数据返回了。
				
				解决：
					1、让href的获取在href的赋值之后：由于并发运行无法保证href的获取，那么就要把事件赋予逻辑放在上一个ajax回调赋值之后
					2、也就是不要$(function())，而是设计为一个可调用的函数love()，在ajax赋数据结束后再调用love
			*/
			
			/*
				点击事件定制
			*/
			var flag = true;//点赞次数限制标志，顺便做强制刷新的盲锚点（页面找不到，则跳转当前位置） 
			$(anchor).click(function(event){
				/*
				 	登录状态判断
				*/
				var loginFlag = Cookies.get("userName");
				if(loginFlag == undefined){
					event.preventDefault();//禁止click默认事件
					//alert("请登录后再收藏，即将跳转登录页面");
					if(window.confirm("未登录无法收藏，是否跳转登录页面？")){ //可选择的alert
						window.location = "/LiveInYouth";
					}
				} else {
					event.preventDefault();//禁止click默认事件
					if(flag){
						$.ajax({
							cache : false , //开启缓存，下个ajax会从缓存中读数据，除非url重写（cache:false就是给url加上时间戳来不缓存请求的）
							type : "GET", //具有幂等性的GET才能使用cache，POST不符合幂等性，所以cache没有意义
							url : href,
							success : function(data) {
								/*
									根据返回参数做出响应
								*/
								if(data.success == "true"){
									alert("收藏成功");
								}else if(data.success == "false"){
									if(data.type == "hasColl"){
										alert("已收藏");
									}else if(data.type == "fail"){
										alert("收藏失败");
									}else if(data.type == "notLogin"){
										if(window.confirm("未登录无法收藏，当前系非法更改前端数据")){ //可选择的alert 
											window.location = "/LiveInYouth";
										}
									}
								}else{
									alert("后台参数异常");
								}
								window.location = "/LiveInYouth/main/work.html#" + flag;//收藏后保持在当前位置,后面是什么不重要，只要是当前元素的元素就好
								flag = false;//限制当前点赞次数，最重要还是要在后台限制（弄一个赞表？）
							}
						});
					}else{
						//前端轻量级的重复点击限制 
						event.preventDefault();//禁止click默认事件 
						alert("已收藏");
						window.location = "/LiveInYouth/main/work.html#" + flag;//收藏后保持在当前位置,后面是什么不重要，只要是当前元素的元素就好
					}
				}			
			});
		});
	});
	</script>
	收藏独立处理js -->
	
	<!-- 收藏独立处理js -->
	<script type="text/javascript">
	function love(){
		/*
			改装点赞独立处理JS	
		
			取消get的默认跳转，且简要地禁止重复点击（bug:刷新重新计算）
		*/
		$("span[class='love']").each(function(i){
			var anchor = $(this).children("a");//取锚点
			var href = anchor.attr("href");//填充评论的赞地址
			/*
				点击事件定制
			*/
			var flag = true;//点赞次数限制标志，顺便做强制刷新的盲锚点（页面找不到，则跳转当前位置） 
			$(anchor).click(function(event){
				event.preventDefault();//禁止click默认事件，从而防止下面get请求页面跳转
				/*
				 	登录状态判断
				*/
				var loginFlag = Cookies.get("userName");
				if(loginFlag == undefined){
					//alert("请登录后再收藏，即将跳转登录页面");
					if(window.confirm("未登录无法收藏，是否跳转登录页面？")){ //可选择的alert
						window.location = "/LiveInYouth";
					}
				} else {
					if(flag){
						$.ajax({
							cache : false , //开启缓存，下个ajax会从缓存中读数据，除非url重写（cache:false就是给url加上时间戳来不缓存请求的）
							type : "GET", //具有幂等性的GET才能使用cache，POST不符合幂等性，所以cache没有意义
							url : href,
							success : function(data) {
								/*
									根据返回参数做出响应
								*/
								if(data.success == "true"){
									alert("收藏成功");
								}else if(data.success == "false"){
									if(data.type == "hasColl"){
										alert("已收藏");
									}else if(data.type == "fail"){
										alert("收藏失败");
									}else if(data.type == "notLogin"){
										if(window.confirm("未登录无法收藏，当前系非法更改前端数据")){ //可选择的alert 
											window.location = "/LiveInYouth";
										}
									}
								}else{
									alert("后台参数异常");
								}
								window.location = "/LiveInYouth/main/work.html#" + flag;//收藏后保持在当前位置,后面是什么不重要，只要是当前元素的元素就好
								flag = false;//限制当前点赞次数，最重要还是要在后台限制（弄一个赞表？）
							}
						});
					}else{
						//前端轻量级的重复点击限制 
						alert("已收藏");
						window.location = "/LiveInYouth/main/work.html#" + flag;//收藏后保持在当前位置,后面是什么不重要，只要是当前元素的元素就好
					}
				}			
			});
		});
	}
	</script>
	<!-- 收藏独立处理js -->
	
	</body>
</html>

